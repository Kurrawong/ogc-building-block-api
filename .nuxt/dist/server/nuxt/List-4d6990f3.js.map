{"version":3,"file":"List-4d6990f3.js","sources":["../../../../components/common/List.vue","../../../../components/containers/List.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { List, HeaderLink } from '~/lib/prez.d';\nimport { template } from '~/helpers/str';\nconst props = defineProps<{list: List, headerTitle?:string, excludeFields?: string[], fields?: string[], info?: boolean, links?: HeaderLink[]}>();\nconst fields = props.fields ? props.fields : Object.keys(props.list.listHeaders);\nconst excludeFields = props.excludeFields ? props.excludeFields : [/^prez:./]\nconst route = useRouter();\n</script>\n<template>\n  <div style=\"position: relative\">\n    <div v-if=\"headerTitle && list\" class=\"text-h3 mb-5 mt-2\">{{ template(headerTitle, list) }}</div>\n    <v-chip variant=\"flat\" style=\"position: absolute; right: 0;top:0;\">{{ list.header.label }}</v-chip>\n    <v-table theme=\"dark\" v-if=\"list\">\n      <thead>\n        <tr>\n          <th style=\"white-space: nowrap;\" v-for=\"field in fields\">\n            {{ field in list.listHeaders ? list.listHeaders[field].label : `${field} missing` }}\n            &nbsp;<a v-if=\"field in list.listHeaders\" :href=\"list.listHeaders[field].iri\" :title=\"field\"><v-icon icon=\"mdi-link\"></v-icon></a>\n            <div v-if=\"info\">{{ field }}</div>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in list.list\" @click=\"$router.push(item['prez:link'])\">\n          <td v-for=\"field in fields\">\n            <!-- <a href=\"#\" :title=\"JSON.stringify(item._meta[field])\">\n            </a> -->\n            <div :title=\"field in item ? item[field] : null\" class=\"td-max\" >\n            {{ field in item ? item[field] : `\"${field}\" not found` }}\n          </div>\n            <!-- {{ item }} -->\n          </td>\n        </tr>\n      </tbody>\n    </v-table>\n    <v-chip-group v-if=\"links\">\n      <v-chip v-for=\"link in links.filter(link=>link.title)\">\n        {{ link.title }}\n      </v-chip>\n    </v-chip-group>\n  </div>\n</template>\n\n<style scoped>\n.td-max {\n  overflow: hidden;\n   text-overflow: ellipsis;\n   display: -webkit-box;\n   -webkit-line-clamp: 2; /* number of lines to show */\n           line-clamp: 2;\n           text-overflow: ellipsis; \n   -webkit-box-orient: vertical;\n}\ntbody tr td {\n  padding-top:8px !important;\n  padding-bottom:8px !important;\n}\ntbody tr:hover {\n  background-color: #333 !important;\n  cursor:pointer;\n}\n.v-table thead {\n  background-color: #19198c;\n}\n.v-table thead th {\n  color:white !important;\n}\n.v-table tbody {\n  background-color: #eee;\n  color:#333;\n}\n.v-table tbody tr:hover {\n  background-color: #ddd !important;\n}\n.v-table tbody tr td {\n  border-right:1px solid #bbb;\n  border-bottom:1px solid #bbb !important;\n}\n.v-table tbody tr td:last-child {\n  border-right:0;\n}\n.v-table tbody tr:last-child td {\n  border-bottom:0 !important;\n}\n</style>","<script setup lang=\"ts\">\nimport { useRDFStore } from \"@/stores/rdf\";\nimport type { List } from '~/lib/prez.d';\nimport { storeToRefs } from \"pinia\";\n\nconst props = defineProps<{dataUrl:string, headerTitle?:string, excludeFields?: string[], fields?:string[], info?:boolean}>();\n\nconst rdfStore = useRDFStore();\nconst { loading, success, error, prez } = storeToRefs(rdfStore);\nconst parseError = ref<string|null>(null);\n\nconst page = ref(1);\nconst list = ref<List|undefined>(undefined);\n\nonMounted(async ()=> {\n  await initData();\n})\n\nconst route = useRoute();\nconst query = ref(route.query);\nwatch(()=> query.value = route.query, ()=>{});\n\nasync function initData() {\n  await rdfStore.load(props.dataUrl, { params: { page: page.value } });\n  if(success.value) {\n    try {\n      parseError.value = null;\n      list.value = prez.value!.list(['skos:prefLabel', 'rdfs:label']);\n    } catch(ex) {\n      parseError.value = (ex as Error).message;\n    }\n  }\n}\n\n</script>\n\n<template>\n  <CommonList v-if=\"list\"\n    :header-title=\"headerTitle\"\n    :list=\"list\"\n    :fields=\"fields\"\n    :exclude-fields=\"excludeFields\"\n    :info=\"info\"\n    :links=\"prez!.headerLinks\"\n  />\n  <CommonLoading :loading=\"loading\" :error=\"error\" />\n  <CommonLoading :loading=\"false\" :error=\"parseError\" />\n\n  <!-- <div>\n    <nuxt-link to=\"?page=2\">Page 2</nuxt-link>\n  </div>\n  <div>PAGE = {{ query.page }}</div>\n  <div>\n\n    <div>\n      <div>URL = {{ listUrl }}</div>\n      <div>Loading = {{ loading }}</div>\n      <div>Error = {{ error }}</div>\n      <div>Success = {{ success }}</div>\n    </div>\n\n  </div> -->\n</template>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAGA,UAAM,QAAQ;AACR,UAAA,SAAS,MAAM,SAAS,MAAM,SAAS,OAAO,KAAK,MAAM,KAAK,WAAW;AACzD,UAAM,gBAAgB,MAAM,gBAAgB,CAAC,SAAS;AAC9D,cAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCxB,UAAM,WAAW;AACjB,UAAM,EAAE,SAAS,SAAS,OAAO,SAAS,YAAY,QAAQ;AACxD,UAAA,aAAa,IAAiB,IAAI;AAE3B,QAAI,CAAC;AACZ,UAAA,OAAO,IAAoB,MAAS;AAM1C,UAAM,QAAQ;AACR,UAAA,QAAQ,IAAI,MAAM,KAAK;AAC7B,UAAM,MAAK,MAAM,QAAQ,MAAM,OAAO,MAAI;AAAA,IAAA,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}